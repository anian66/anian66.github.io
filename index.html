<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!-- Dock/navigation bar -->
    <div class="dock">
        <!-- Existing content -->
    </div>

    <!-- ğŸŒ è“ç‰™è¿æ¥æŒ‰é’®åŒºåŸŸï¼ˆæ’å…¥ç‚¹ï¼šDock ä¹‹åï¼ŒHome æŒ‡ç¤ºå™¨ä¹‹å‰ï¼‰ -->
    <div class="bluetooth-section w-full flex justify-center mt-3">
      <button id="bluetoothButton" class="bluetooth-btn">
        ğŸ”µ è“ç‰™è¿æ¥
      </button>
      <div id="status" class="bluetooth-status ml-3">æœªè¿æ¥</div>
    </div>

    <!-- âœ¨ æŒ‰é’®åŠ¨ç”»å’Œæ ·å¼ï¼ˆå±€éƒ¨æ ·å¼ï¼Œå¯æ ¹æ®éœ€è¦åˆå¹¶åˆ°å…¨å±€ CSSï¼‰ -->
    <style>
      .bluetooth-section {
        width: 100%;
        text-align: center;
        margin-top: 12px;
      }

      .bluetooth-btn {
        background: linear-gradient(135deg, #4f8ef7, #00c2ff);
        color: white;
        border: none;
        border-radius: 40px;
        padding: 10px 22px;
        font-size: 16px;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 4px 15px rgba(0, 162, 255, 0.4);
      }

      .bluetooth-btn:hover {
        transform: scale(1.03);
        background: linear-gradient(135deg, #00c2ff, #4f8ef7);
        box-shadow: 0 6px 20px rgba(0, 162, 255, 0.6);
      }

      .bluetooth-btn:active {
        transform: scale(0.98);
      }

      .bluetooth-status {
        margin-top: 0;
        font-size: 14px;
        color: #bbb;
        transition: color 0.3s;
        display: inline-block;
        vertical-align: middle;
      }
    </style>

    <!-- âš™ï¸ è“ç‰™è¿æ¥é€»è¾‘ï¼ˆä½¿ç”¨ Web Bluetooth APIï¼‰ -->
    <script>
      (function(){
        const bluetoothButton = document.getElementById("bluetoothButton");
        const statusBox = document.getElementById("status");

        bluetoothButton.addEventListener("click", async () => {
          if (!navigator.bluetooth) {
            statusBox.textContent = "âŒ å½“å‰æµè§ˆå™¨ä¸æ”¯æŒ Web Bluetooth";
            statusBox.style.color = "red";
            return;
          }

          try {
            statusBox.textContent = "ğŸ” æœç´¢è“ç‰™è®¾å¤‡ä¸­...";
            statusBox.style.color = "blue";

            const device = await navigator.bluetooth.requestDevice({
              acceptAllDevices: true,
              optionalServices: ["battery_service"]
            });

            statusBox.textContent = `ğŸ”— æ­£åœ¨è¿æ¥ ${device.name || "æœªçŸ¥è®¾å¤‡"}...`;
            const server = await device.gatt.connect();

            statusBox.textContent = `âœ… å·²è¿æ¥ï¼š${device.name || "æœªçŸ¥è®¾å¤‡"}`;
            statusBox.style.color = "green";

            // å¯é€‰ï¼šç›‘å¬æ–­å¼€äº‹ä»¶
            device.addEventListener("gattserverdisconnected", () => {
              statusBox.textContent = "ğŸ”´ è“ç‰™å·²æ–­å¼€";
              statusBox.style.color = "red";
            });

          } catch (error) {
            statusBox.textContent = `âš ï¸ è¿æ¥å¤±è´¥ï¼š${error.message}`;
            statusBox.style.color = "orange";
          }
        });
      })();
    </script>

    <!-- Home Indicator div -->
    <div class="home-indicator">
        <!-- Existing content -->
    </div>
</body>
</html>